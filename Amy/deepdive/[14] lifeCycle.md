##### | 모던 자바스크립트 DeepDive <br />

###### range: 14. 전역 변수의 문제점 <br />

###### date: day10 (2024.01.25) <br />

<hr />
<br />

전역 변수의 무분별한 사용 X <br />
반드시 사용해야 할 이유가 없다면 지역 변수 사용 <br />

## 변수의 생명주기

변수의 생명 주기는 메모리 공간이 확보된 시점부터 메모리 공간이 해제돼 가용 메모리 풀에 반환되는 시점까지.

- 전역 변수 : 애플리케이션의 생명 주기와 동일
- 지역 변수 : 함수의 생명주기와 동일 (함수 호출 시 생성, 함수 종료 시 소멸)

누군가가 메모리 공간을 참조하고 있으면 해제되지 않고 확보된 상태로 남아 있게 됨. <br />
일반적으로 함수가 종료하면 함수가 생성한 스코프도 소멸

지역 변수는 함수 전체에서 유효 <br />
단, 변수 할당문이 실행되기 전까지는 undefined 값을 가짐 <br />

### 전역 변수의 문제점

**암묵적 결합**

전역 변수를 선언한 의도는 코드 어디서든 참조/할당 가능한 변수의 사용을 위함 <br />
즉, 모든 코드가 전역 변수를 참조하고 변경할 수 있는 암묵적 결합을 허용 <br />
변수의 유효 범위가 클수록 가독성 저하, 안정성 저하 <br />

**긴 생명주기**

메모리 리소스도 오랜 기간 소비 <br />

**스코프 체인 상에서 종점에 존재**

변수 검색 시 전역 변수가 가장 마지막에 검색됨을 의미 <br />
전역 변수의 검색 속도가 가장 느림 <br />

**네임스페이스 오염**

파일이 분리돼 있다 해도 하나의 전역 스코프를 공유하기 때문에 동일 이름이 어디에 존재할 위험이 있음 -> 예상치 못한 결과 초래 가능성 O

## 억제 방법

1. 즉시 실행 함수로 감싸기

모든 코드를 즉시 실행 함수로 감싸면 모든 변수는 즉시 실행 함수의 지역 변수가 됨 <br />
라이브러리 등에 자주 사용되는 방법 <br />

2. 네임스페이스 객체의 프로퍼티로 사용

전역에 네임스페이스 역할을 담당할 객체를 생성하고 전역 변수처럼 사용하고 싶은 변수를 프로퍼티로 추가하는 방법 <br />

3. 모듈 패턴

모듈 패턴은 전역 네임스페이스의 오염을 막을 뿐 아니라 정보 은닉 구현을 위해 사용 <br />

4. ES6 모듈

파일 자체의 독자적인 모듈 스코프를 제공하기 때문에 ES6 모듈을 사용하게 되면 전역 변수 사용 불가 <br />
